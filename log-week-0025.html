<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Week 0025</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="favicon.png" />

    <script defer data-domain="nbishop.net" src="https://plausible.io/js/plausible.js"></script>
  </head>

  <body>
    <h1>Week 0025</h1>

    <a class="content" href="index.html">« Home</a>
    <!-- Little hack: only show date if not on the home page -->
    <p class="content date">Created 2022-08-01, last updated 2022-08-07 19:15:31 UTC</p>
    <div class="content">
      <h2>gpt-disk-rs</h2>
<ul>
<li>A developer contacted me to suggest changing the license from just
Apache-2.0 to Apache-2.0 or MIT. This improves compatibility with
GPLv2 and is in alignment with much of the Rust ecosystem. That change
has now been made and new versions of the crates have been
released. (Took me a few tries to get the license README links
correct, so ended up with a few extra dot releases of <code>uguid</code>, but
should be all good now.)</li>
</ul>
<h2>uefi-rs</h2>
<ul>
<li>Spent some time testing and reviewing a
<a href="https://github.com/rust-osdev/uefi-rs/pull/467">PR</a> that adds support
for a couple more disk protocols. The nonblocking stuff was a bit tricky.</li>
<li>Finally put up a PR for
<a href="https://github.com/rust-osdev/uefi-rs/pull/478"><code>open_protocol_exclusive</code></a>,
which I think will provide about the best interface possible for
safely opening UEFI protocols given the limitations of the UEFI
design. (I think ideally UEFI would have a reference count on open
protocols, rather than just exclusive vs free-for-all, but that's
outside the scope of what I think we can accomplish in uefi-rs.)</li>
<li>Put up a <a href="https://github.com/rust-osdev/uefi-rs/pull/479">PR</a> to
remove use of the unstable <code>try_trait_v2</code> feature. This has a small
impact on the API, but I think removing it is the right thing to do to
avoid potential future breakage on nightly due to the <code>Try</code> API still
being under discussion.</li>
</ul>
<h2>Rust</h2>
<ul>
<li>Opened another <a href="https://github.com/rust-lang/compiler-builtins/pull/486"><code>compiler_builtins</code>
PR</a> to fix
some more UEFI intrinsics. For some reason the ABI intrinsics that
convert from i128/u128 to f32/f64 are different depending on whether
softfloat is enabled.</li>
<li>Opened a <a href="https://github.com/rust-lang/rust/pull/100117">Rust PR</a> to
update the <code>cc</code> crate to latest. That fixes some issues with compiling
<code>compiler_builtins</code> for the UEFI targets.</li>
<li>Opened a <a href="https://github.com/rust-lang/rust/pull/100038">Rust PR</a> to
add documentation for the <code>no-std</code> target build option. Since
<a href="https://github.com/rust-lang/rust/pull/99765">https://github.com/rust-lang/rust/pull/99765</a> was merged this option
isn't needed for UEFI anymore, but can hopefully help future people
trying to build for new targets that don't support <code>std</code> (until such
time as <a href="https://github.com/rust-lang/rust/pull/99765">https://github.com/rust-lang/rust/pull/99765</a> is fixed).</li>
<li>Opened a <a href="https://github.com/rust-lang/rust/pull/100218">Rust PR</a> to
update the <code>compiler_builtins</code> crate to latest. This will fix some
(but not all) UEFI intrinsic ABI issues.</li>
</ul>

    </div>

    <hr />

    <div class="content">
      © 2023 <a href="mailto:nbishop@nbishop.net">Nicholas Bishop</a>
      •
      <a href="index.html">Home</a>
      •
      <a href="https://github.com/nicholasbishop/nbishop-net">Repo</a>

      <!-- License -->
      <div id="license">
        Unless otherwise noted, content is licensed under
        <a href="https://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>.
        Code blocks are <em>additionally</em> available under
        <a href="https://creativecommons.org/share-your-work/public-domain/cc0">CC0</a> and
        <a href="https://www.apache.org/licenses/LICENSE-2.0.txt">Apache License version 2.0</a>
        at your option.
      </div>
    </div>
  </body>
</html>
